<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Db</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Db.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption empty">&nbsp;</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Maintainer</th><td>al.alnaimi@gmail.com</td></tr><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Db</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module handles requests; fetch or execution
of queries; to the database. Such as inserting
new tweets from Twitter into the local database.
All statements are prepared to prevent SQL injection.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span> <a href="#t:DbConfig">DbConfig</a> = <a href="#v:DbConfig">DbConfig</a> {<ul class="subs"><li><a href="#v:dbName">dbName</a> :: String</li><li><a href="#v:dbUser">dbUser</a> :: String</li><li><a href="#v:dbPassword">dbPassword</a> :: String</li></ul>}</li><li class="src short"><a href="#v:newConn">newConn</a> :: <a href="Db.html#t:DbConfig">DbConfig</a> -&gt; IO Connection</li><li class="src short"><a href="#v:fetchT">fetchT</a> :: (QueryResults r, QueryParams q) =&gt; Pool Connection -&gt; q -&gt; Query -&gt; IO [r]</li><li class="src short"><a href="#v:fetchSimpleT">fetchSimpleT</a> :: QueryResults r =&gt; Pool Connection -&gt; Query -&gt; IO [r]</li><li class="src short"><a href="#v:execSqlT">execSqlT</a> :: QueryParams q =&gt; Pool Connection -&gt; q -&gt; Query -&gt; IO Int64</li><li class="src short"><a href="#v:findUserByLogin">findUserByLogin</a> :: Pool Connection -&gt; String -&gt; IO (Maybe String)</li><li class="src short"><a href="#v:listTweets">listTweets</a> :: Pool Connection -&gt; Text -&gt; IO (Maybe [<a href="JSON.html#t:Tweet">Tweet</a>])</li><li class="src short"><a href="#v:findTweet">findTweet</a> :: Pool Connection -&gt; Text -&gt; IO (Maybe <a href="JSON.html#t:Tweet">Tweet</a>)</li><li class="src short"><a href="#v:insertTweets">insertTweets</a> :: Pool Connection -&gt; Maybe [<a href="JSON.html#t:Tweet">Tweet</a>] -&gt; ActionT Text IO ()</li><li class="src short"><a href="#v:insertTweet">insertTweet</a> :: Pool Connection -&gt; <a href="JSON.html#t:Tweet">Tweet</a> -&gt; ActionT Text IO ()</li><li class="src short"><a href="#v:deleteTweet">deleteTweet</a> :: Pool Connection -&gt; Text -&gt; IO (Maybe Integer)</li><li class="src short"><a href="#v:listUsers">listUsers</a> :: Pool Connection -&gt; Text -&gt; IO (Maybe [<a href="JSON.html#t:User">User</a>])</li><li class="src short"><a href="#v:insertUsers">insertUsers</a> :: Pool Connection -&gt; Maybe [<a href="JSON.html#t:User">User</a>] -&gt; ActionT Text IO ()</li><li class="src short"><a href="#v:insertUser">insertUser</a> :: Pool Connection -&gt; <a href="JSON.html#t:User">User</a> -&gt; ActionT Text IO ()</li><li class="src short"><a href="#v:updateUser">updateUser</a> :: Pool Connection -&gt; Maybe <a href="JSON.html#t:User">User</a> -&gt; ActionT Text IO ()</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:DbConfig" class="def">DbConfig</a></p><div class="doc"><p>DbConfig contains info needed to connect to MySQL such
   as user, password, etc.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:DbConfig" class="def">DbConfig</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:dbName" class="def">dbName</a> :: String</dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:dbUser" class="def">dbUser</a> :: String</dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:dbPassword" class="def">dbPassword</a> :: String</dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:DbConfig" class="caption collapser" onclick="toggleSection('i:DbConfig')">Instances</p><div id="section.i:DbConfig" class="show"><table><tr><td class="src clearfix"><span class="inst-left">Show <a href="Db.html#t:DbConfig">DbConfig</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">Generic <a href="Db.html#t:DbConfig">DbConfig</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="keyword">type</span> Rep <a href="Db.html#t:DbConfig">DbConfig</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:newConn" class="def">newConn</a> :: <a href="Db.html#t:DbConfig">DbConfig</a> -&gt; IO Connection</p><div class="doc"><p>Creates a Databse connection through
   the configuration file applicaiton.conf</p></div></div><div class="top"><p class="src"><a name="v:fetchT" class="def">fetchT</a> :: (QueryResults r, QueryParams q) =&gt; Pool Connection -&gt; q -&gt; Query -&gt; IO [r]</p><div class="doc"><p>Fetch command which accepts arguments</p></div></div><div class="top"><p class="src"><a name="v:fetchSimpleT" class="def">fetchSimpleT</a> :: QueryResults r =&gt; Pool Connection -&gt; Query -&gt; IO [r]</p><div class="doc"><p>Simple fetch without prepared arguments</p></div></div><div class="top"><p class="src"><a name="v:execSqlT" class="def">execSqlT</a> :: QueryParams q =&gt; Pool Connection -&gt; q -&gt; Query -&gt; IO Int64</p><div class="doc"><p>Execute with arguments to update database</p></div></div><div class="top"><p class="src"><a name="v:findUserByLogin" class="def">findUserByLogin</a> :: Pool Connection -&gt; String -&gt; IO (Maybe String)</p><div class="doc"><p>Returns the encrypted password for a user from the DB, if user is found</p></div></div><div class="top"><p class="src"><a name="v:listTweets" class="def">listTweets</a> :: Pool Connection -&gt; Text -&gt; IO (Maybe [<a href="JSON.html#t:Tweet">Tweet</a>])</p><div class="doc"><p>Lists all tweets matching a certain screen_name, based on SQL LIKE; %% for all tweets</p></div></div><div class="top"><p class="src"><a name="v:findTweet" class="def">findTweet</a> :: Pool Connection -&gt; Text -&gt; IO (Maybe <a href="JSON.html#t:Tweet">Tweet</a>)</p><div class="doc"><p>List a single tweet based on user ID</p></div></div><div class="top"><p class="src"><a name="v:insertTweets" class="def">insertTweets</a> :: Pool Connection -&gt; Maybe [<a href="JSON.html#t:Tweet">Tweet</a>] -&gt; ActionT Text IO ()</p><div class="doc"><p>Insert list of tweets into database based on returned tweets from
   Querying the REST API of twitter</p></div></div><div class="top"><p class="src"><a name="v:insertTweet" class="def">insertTweet</a> :: Pool Connection -&gt; <a href="JSON.html#t:Tweet">Tweet</a> -&gt; ActionT Text IO ()</p><div class="doc"><p>Insert a single tweet into the database</p></div></div><div class="top"><p class="src"><a name="v:deleteTweet" class="def">deleteTweet</a> :: Pool Connection -&gt; Text -&gt; IO (Maybe Integer)</p><div class="doc"><p>Delete a tweet in the database based on id</p></div></div><div class="top"><p class="src"><a name="v:listUsers" class="def">listUsers</a> :: Pool Connection -&gt; Text -&gt; IO (Maybe [<a href="JSON.html#t:User">User</a>])</p><div class="doc"><p>Lists all users matching a certain screen_name, based on SQL LIKE; %% for all tweets</p></div></div><div class="top"><p class="src"><a name="v:insertUsers" class="def">insertUsers</a> :: Pool Connection -&gt; Maybe [<a href="JSON.html#t:User">User</a>] -&gt; ActionT Text IO ()</p><div class="doc"><p>Insert list of users into database based on returned users from
   Querying the REST API of twitter</p></div></div><div class="top"><p class="src"><a name="v:insertUser" class="def">insertUser</a> :: Pool Connection -&gt; <a href="JSON.html#t:User">User</a> -&gt; ActionT Text IO ()</p><div class="doc"><p>Insert a single user into the database</p></div></div><div class="top"><p class="src"><a name="v:updateUser" class="def">updateUser</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Pool Connection</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; Maybe <a href="JSON.html#t:User">User</a></td><td class="doc"><p>Was the JSON body in correct form?</p></td></tr><tr><td class="src">-&gt; ActionT Text IO ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Update a user based on unique screen_name</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>